% SPDX-FileCopyrightText: Copyright (C) Nile Jocson <novoseiversia@gmail.com>
% SPDX-License-Identifier: MPL-2.0

\usepackage[a4paper, margin=1in]{geometry}

\usepackage{adjustbox}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{gensymb}
\usepackage{physics}

\usepackage{tabularray}
\usepackage{tkz-tab}
\usepackage{xpatch}

\usepackage{pstricks-add}
\usepackage{pst-eucl}
\usepackage[crop=off]{auto-pst-pdf}



\renewcommand{\arraystretch}{1.75}
\renewcommand{\thesubsubsection}{\thesubsection.\alph{subsubsection}}



\DefTblrTemplate{caption}{default}{}
\DefTblrTemplate{capcont}{default}{}

\xpatchcmd{\tkzTabLine}{$0$}{$\bullet$}{}{}
\tikzset{t style/.style={style=solid}}



\newcommand*{\cjboilerplate}[2]{
	\psset{unit=5.5mm, ticks=none, xlabelsep=1pt, ylabelsep=1pt}

	\author{Nile Jocson \textless{}novoseiversia@gmail.com\textgreater{}}
	\title{Exercise Solutions for #1\\{\large #2}}
	\date{\today}

	\maketitle{}
	\null\vfill\noindent
	Copyright \copyright{} Nile Jocson \textless{}novoseiversia@gmail.com\textgreater{} \\
	Licensed under MPL-2.0. See LICENSE file.
		\pagebreak
}



\newenvironment{cjsection}[1]
{
	\section{#1}
}
{
	\pagebreak
}

\newcommand*{\cjitem}[1]{\subsection{#1}}
\newcommand*{\cjsubitem}[1]{\subsubsection{#1}}



\newcommand*{\cjsolsect}[1]{\hline --- #1: \\}
\newcommand*{\cjneeded}[2]{\hline --- Needed: \\ \(\square\) #1 \(= \mathord{?}\) & #2 \\}
\newcommand*{\cjgiven}[2]{\(\square\) #1 & #2 \\}

\newcommand*{\cjwhy}[2]{\hline \(\Rightarrow\) #1 & #2 \\}
\newcommand*{\cjsubwhy}[2]{\(\Rightarrow\) #1 & #2 \\}
\newcommand*{\cjcontinue}[1]{\(\Rightarrow\) #1 & \\}
\newcommand*{\cjfa}[1]{\hline \(\Rightarrow\) #1 & Final answer. \\}
\newcommand*{\cjfastep}[2]{\hline \(\Rightarrow\) #1 & Final answer. #2 \\}

\newcommand*{\cjsign}[1]{
	\hline & Create a table of signs. \\
	\begin{adjustbox}{width=0.49\textwidth}
		\begin{tikzpicture}
			#1
		\end{tikzpicture}
	\end{adjustbox} \\ \\
}

\newcommand*{\cjgraph}[3]{
	\begin{center}
		\begin{adjustbox}{width=\textwidth}
			\begin{pspicture*}(-#2,-#2)(#2,#2)
				\psaxes[labels=none]{<->}(0,0)(-#2,-#2)(#2,#2)
				#3
			\end{pspicture*}
		\end{adjustbox}
		#1
	\end{center}
	\pagebreak
}

\newcommand*{\cjsystem}[2]{
	\begin{equation*}
		#1
		\begin{cases}
			#2
		\end{cases}
	\end{equation*}
}

\newcommand*{\cjqed}{\(\blacksquare\)}



\NewDocumentEnvironment{cjsolution}{+b}
{
	\begin{longtblr}
	[
		expand = \cjwhy\cjsubwhy\cjcontinue\cjfa\cjfastep\cjsign\cjgiven\cjsolsect\cjneeded\cjsystem
	]
	{
		colspec = {|lX[r]|},
		width = \textwidth
	}
		#1
		& \cjqed{} \\
		\hline
	\end{longtblr}
}{}



\newcommand*{\cjdiv}{\divisionsymbol{}}
\newcommand*{\cjexp}[1]{\times 10^{#1}}
\newcommand*{\cjunit}[1]{\text{ #1}}
\newcommand*{\cjceil}[1]{\lceil#1\rceil}
\newcommand*{\cjlog}[2]{\text{log}_{#1} #2}
